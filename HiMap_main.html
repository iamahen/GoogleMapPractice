<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hi!Map!</title>
    <style type="text/css">
        html, body { height: 100%; margin: 0; padding: 0; }
        #map { height: 100%; }
    </style>
</head>

<body>
<div id="map"></div>
<script type="text/javascript">
    // Locations --Travel in 2013(part1)
    locations = [
        { title: 'Berlin', gps: {lat: 52.503578, lng: 13.384491}},
        { title: 'Leipzig', gps: {lat: 51.338375, lng: 12.372342}},
        { title: 'Dresden', gps: {lat: 51.217784, lng: 13.706641}},
        { title: 'Prague', gps: {lat: 50.103835, lng: 14.410665}},
        { title: 'Kluczbork(Agrochatca)', gps: {lat: 51.006343, lng:18.310684}},
        { title: 'Opole', gps: {lat: 50.688012, lng: 17.923445}},
        { title: 'Krakow', gps: {lat: 50.081250, lng: 19.940301}},
        { title: 'Wroclaw', gps: {lat: 51.127174, lng: 17.030289}},
        { title: 'Vienna', gps: {lat: 48.287796, lng: 16.380326}},
        { title: 'Salzburg', gps: {lat: 47.798753, lng: 13.046472}},
        { title: 'Munchen', gps: {lat: 48.173110, lng: 11.554362}},
        { title: 'Budapest', gps: {lat: 47.553216, lng: 19.058863}},
        { title: 'Zagreb', gps: {lat: 45.895573, lng: 15.991790}},
        { title: 'Plitvicka Jezera', gps: {lat: 44.866081, lng: 15.582141}},
        { title: 'Split', gps: {lat: 43.605769, lng: 16.411335}},
        { title: 'Hvar', gps: {lat: 43.209660, lng: 16.627596}},
    ];

    var map;
    function initMap() {
        // Create an initial status of map.
        var berlin = { lat: 52.503578, lng: 13.384491};
        map = new google.maps.Map(document.getElementById('map'), {
            center: berlin,
            zoom: 14
        });
        var bounds = new google.maps.LatLngBounds();

        // Create a single infowindow, with your own content.
        // It must appear on the marker
        var info = new google.maps.InfoWindow(
            {
                content: 'Hello!'
            }
        );

        // Create a single marker appearing on initialize -
        // Create it with the position of the singleLatLng,
        // on the map, and give it your own title!
        icon_size = 70;
        var marker_icon = {
            url: 'content/HiMap_AronAhen.PNG',
            scaledSize: new google.maps.Size(icon_size, icon_size), // scaled size
            origin: new google.maps.Point(0,0),   // origin
            anchor: new google.maps.Point(icon_size/2,icon_size)  // anchor
        };

        var city_markers = [];
        var city_infos = [];
        for( var i = 0; i<locations.length; i++ )
        {
            var position = locations[i].gps;
            var title = locations[i].title;
            var marker = new google.maps.Marker(
                {
                    id: i,
                    map: map,
                    position: position,
                    title: title,
                    icon: marker_icon,
                    animation: google.maps.Animation.DROP
                }
            );
            console.log("AhenDebug: " + position.lat + ", " + position.lng + ", " + title);

            // Create an EVENT LISTENER so that the infowindow opens when
            // the marker is clicked!
            marker.addListener(
                'click',
                function(){
                    updateInfo(info, this);
                }
            );
            city_markers.push(marker);
            bounds.extend(marker.position);
        }

        // Extend the boundaries of the map for each marker
        map.fitBounds(bounds);
    }

    function updateInfo(info, marker){
        info.setContent('Hello!' + marker.title + '!');
        info.open( map, marker )
    }

</script>
<!--TODO: Insert your API Key in the below call to load the API.-->
<script async defer
        src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyDzUy_lZjwsDMaAfCns7toKdbkJ0UNHxMI&callback=initMap">
</script>

</body>
</html>